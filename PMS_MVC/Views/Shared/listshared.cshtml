@model IEnumerable<PMS_MVC.Models.Category>
<div class="container mt-4">
    <div class="table-responsive shadow-sm p-3 mb-5 bg-body rounded">
        <!-- Category List table -->
        <table id="CategoryListTable" class="table table-striped table-hover mt-3 w-100 categoryManagementData">
            <thead>
                <tr>
                    <th class="col">
                        Name
                        <span>
                            <button onclick="CategoryFilter(1)" id="sortDownName" class="btn btn-sm p-0"><i class="bi bi-sort-down"></i></button>
                            <button onclick="CategoryFilter(2)" id="sortUpName" class="btn btn-sm p-0"><i class="bi bi-sort-up"></i></button>
                        </span>
                    </th>
                    <th class="col">
                        Code
                        <span>
                            <button onclick="CategoryFilter(3)" id="sortDownCode" class="btn btn-sm p-0"><i class="bi bi-sort-down"></i></button>
                            <button onclick="CategoryFilter(4)" id="sortUpCode" class="btn btn-sm p-0"><i class="bi bi-sort-up"></i></button>
                        </span>
                    </th>
                    <th class="col">
                        Created At
                        <span>
                            <button onclick="CategoryFilter(5)" id="sortDownCDate" class="btn btn-sm p-0"><i class="bi bi-sort-down"></i></button>
                            <button onclick="CategoryFilter(6)" id="sortUpCDate" class="btn btn-sm p-0"><i class="bi bi-sort-up"></i></button>
                        </span>
                    </th>
                    <th class="col">
                        Modified At
                        <span>
                            <button onclick="CategoryFilter(7)" id="sortDownMDate" class="btn btn-sm p-0"><i class="bi bi-sort-down"></i></button>
                            <button onclick="CategoryFilter(8)" id="sortUpMDate" class="btn btn-sm p-0"><i class="bi bi-sort-up"></i></button>
                        </span>
                    </th>
                    <th class="col">
                        Description
                        <span>
                            <button class="btn btn-sm p-0" onclick="CategoryFilter(9)"><i class="bi bi-sort-down"></i></button>
                            <button class="btn btn-sm p-0" onclick="CategoryFilter(10)"><i class="bi bi-sort-up"></i></button>
                        </span>
                    </th>
                    <th class="col">Action</th>
                </tr>

            </thead>
            <tbody id="categoryTabledata">
                @foreach (var category in Model)
                {
                    <tr class="tr text-left dark-mode2" data-rid="@category.Id">
                        <td>@category.Name</td>
                        <td>@category.Code</td>
                        <td>@category.CreatedAt.ToString("dd-MM-yyyy hh:mm tt")</td>
                        <td>@(category.ModifiedAt?.ToString("dd-MM-yyyy hh:mm tt") ?? "")</td>
                        <td>@category.Description</td>
                        <td>
                           @*  @if (!(bool)category.IsSystem)
                            { *@
                                <div class="btn-group ms-1 d-flex" role="group">
                                    <div class="ms-1">
                                        <button data-toggle="tooltip" data-placement="top" title="Edit" onclick="location.href='@Url.Action("save", "category", new { Id = @category.Id })'" class="btn btn-warning btn-sm me-1">
                                            <i class="bi bi-pencil-square"></i>
                                        </button>
                                    </div>
                                    <div class="ms-1">
                                        <button data-toggle="tooltip" data-placement="top" title="View" onclick="location.href='@Url.Action("detail", "category", new { Id = @category.Id })'" type="button" class="btn btn-info btn-sm me-1">
                                            <i class="bi bi-list"></i>
                                        </button>
                                    </div>
                                    <div class="ms-1">
                                        <button onclick="handleDeleteCategoryClick()" data-toggle="tooltip" data-placement="top" title="Delete" class="deleteCategory btn btn-danger btn-sm me-1">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            @* } *@

                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>



<!-- delete category modal -->
<div class="modal fade" id="delCategoryModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-info">
                <h5 class="modal-title" id="exampleModalLabel">Delete Category?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Form -->
                <form asp-action="Delete" asp-controller="Category" id="Accpreq" method="post">
                    <input type="hidden" value="" id="CategoryIdVal" name="Id">
                    <p><strong>Are you sure you want to delete this category?</strong></p>
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-danger">Delete</button>
                        <button type="button" class="btn btn-success ms-2" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>
@section scripts {
    <partial name="_ValidationScriptsPartial" />
}